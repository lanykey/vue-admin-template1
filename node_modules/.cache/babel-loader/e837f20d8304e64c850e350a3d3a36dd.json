{"remainingRequest":"C:\\web\\yygh_vscode_web\\vue-admin-template1\\node_modules\\babel-loader\\lib\\index.js!C:\\web\\yygh_vscode_web\\vue-admin-template1\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\web\\yygh_vscode_web\\vue-admin-template1\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\web\\yygh_vscode_web\\vue-admin-template1\\src\\store\\modules\\user.js","mtime":1641733589298},{"path":"C:\\web\\yygh_vscode_web\\vue-admin-template1\\babel.config.js","mtime":1641631809744},{"path":"C:\\web\\yygh_vscode_web\\vue-admin-template1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641728271090},{"path":"C:\\web\\yygh_vscode_web\\vue-admin-template1\\node_modules\\babel-loader\\lib\\index.js","mtime":1641728277093},{"path":"C:\\web\\yygh_vscode_web\\vue-admin-template1\\node_modules\\eslint-loader\\index.js","mtime":1641728270281}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGxvZ2luLCBsb2dvdXQsIGdldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycKICB9Owp9OwoKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgJ3Rva2VuJzogJ2FkbWluJwogICAgfTsKICAgIHNldFRva2VuKGRhdGEudG9rZW4pOyAvLyDlsIZ0b2tlbuWtmOWCqOWcqGNvb2tpZeS4rQoKICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgZGF0YS50b2tlbik7IC8vIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSB1c2VySW5mbwogICAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIC8vICAgbG9naW4oeyB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLCBwYXNzd29yZDogcGFzc3dvcmQgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAvLyAgICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgLy8gICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgZGF0YS50b2tlbikKICAgIC8vICAgICBzZXRUb2tlbihkYXRhLnRva2VuKQogICAgLy8gICAgIHJlc29sdmUoKQogICAgLy8gICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAvLyAgICAgcmVqZWN0KGVycm9yKQogICAgLy8gICB9KQogICAgLy8gfSkKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICAvLyBjb25zdCBkYXRhICA9IHsncm9sZXMnOidhZG1pbicsJ25hbWUnOidhZG1pbicsJ2F2YXRhcic6J2h0dHA6Ly9sb2NhbGhvc3Q6OTUyOC8/aW1hZ2VWaWV3Mi8xL3cvODAvaC84MCd9CiAgICB2YXIgZGF0YSA9IHsKICAgICAgJ3JvbGVzJzogWydhZG1pbiddLAogICAgICAnbmFtZSc6ICdhZG1pbicsCiAgICAgICdhdmF0YXInOiAnaHR0cHM6Ly93cGltZy53YWxsc3Rjbi5jb20vZjc3ODczOGMtZTRmOC00ODcwLWI2MzQtNTY3MDNiNGFjYWZlLmdpZicKICAgIH07CgogICAgaWYgKGRhdGEucm9sZXMgJiYgZGF0YS5yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgIC8vIOmqjOivgei/lOWbnueahOaYr3JvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgIC8vICDpnZ7nqbrmlbDnu4QKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBkYXRhLnJvbGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlamVjdCgnZ2V0SW5mbzpyb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkgIScpOwogICAgfQoKICAgIGNvbW1pdCgnU0VUX05BTUUnLCBkYXRhLm5hbWUpOwogICAgY29tbWl0KCdTRVRfQVZBVEFSJywgZGF0YS5hdmF0YXIpOyAvLyByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgLy8gICBnZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKHJlc3BvbnNlID0+IHsKICAgIC8vICAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3BvbnNlCiAgICAvLyAgICAgaWYgKCFkYXRhKSB7CiAgICAvLyAgICAgICByZXR1cm4gcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJykKICAgIC8vICAgICB9CiAgICAvLyAgICAgY29uc3QgeyBuYW1lLCBhdmF0YXIgfSA9IGRhdGEKICAgIC8vICAgICBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSkKICAgIC8vICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpCiAgICAvLyAgICAgcmVzb2x2ZShkYXRhKQogICAgLy8gICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAvLyAgICAgcmVqZWN0KGVycm9yKQogICAgLy8gICB9KQogICAgLy8gfSkKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICByZW1vdmVUb2tlbjsgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIC8vICAgbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKCgpID0+IHsKICAgIC8vICAgICByZW1vdmVUb2tlbigpIC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKICAgIC8vICAgICByZXNldFJvdXRlcigpCiAgICAvLyAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpCiAgICAvLyAgICAgcmVzb2x2ZSgpCiAgICAvLyAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgIC8vICAgICByZWplY3QoZXJyb3IpCiAgICAvLyAgIH0pCiAgICAvLyB9KQogIH0sCiAgLy8gcmVtb3ZlIHRva2VuIOWJjeerryDnmbvlh7oKICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgLy8gRmVkTG9nT3V0CiAgICAvLyByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgcmVzb2x2ZSgpOyAvLyB9KQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["C:/web/yygh_vscode_web/vue-admin-template1/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","actions","userInfo","commit","data","roles","length","reject","resetToken","resolve","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/user'\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\nimport { resetRouter } from '@/router'\r\n\r\nconst getDefaultState = () => {\r\n  return {\r\n    token: getToken(),\r\n    name: '',\r\n    avatar: ''\r\n  }\r\n}\r\n\r\nconst state = getDefaultState()\r\n\r\nconst mutations = {\r\n  RESET_STATE: (state) => {\r\n    Object.assign(state, getDefaultState())\r\n  },\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_NAME: (state, name) => {\r\n    state.name = name\r\n  },\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar = avatar\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // user login\r\n  login({ commit }, userInfo) {\r\n    const data = { 'token': 'admin' }\r\n\r\n    setToken(data.token)// 将token存储在cookie中\r\n    commit('SET_TOKEN', data.token)\r\n\r\n    // const { username, password } = userInfo\r\n    // return new Promise((resolve, reject) => {\r\n    //   login({ username: username.trim(), password: password }).then(response => {\r\n    //     const { data } = response\r\n    //     commit('SET_TOKEN', data.token)\r\n    //     setToken(data.token)\r\n    //     resolve()\r\n    //   }).catch(error => {\r\n    //     reject(error)\r\n    //   })\r\n    // })\r\n  },\r\n\r\n  // get user info\r\n  getInfo({ commit, state }) {\r\n    // const data  = {'roles':'admin','name':'admin','avatar':'http://localhost:9528/?imageView2/1/w/80/h/80'}\r\n    const data = {\r\n      'roles': ['admin'],\r\n      'name': 'admin',\r\n      'avatar': 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif'\r\n    }\r\n    if (data.roles && data.roles.length > 0) { // 验证返回的是roles是否是一个非空数组\r\n    //  非空数组\r\n      commit('SET_ROLES', data.roles)\r\n    } else {\r\n      reject('getInfo:roles must be a non-null array !')\r\n    }\r\n    commit('SET_NAME', data.name)\r\n    commit('SET_AVATAR', data.avatar)\r\n\r\n    // return new Promise((resolve, reject) => {\r\n    //   getInfo(state.token).then(response => {\r\n    //     const { data } = response\r\n\r\n    //     if (!data) {\r\n    //       return reject('Verification failed, please Login again.')\r\n    //     }\r\n\r\n    //     const { name, avatar } = data\r\n\r\n    //     commit('SET_NAME', name)\r\n    //     commit('SET_AVATAR', avatar)\r\n    //     resolve(data)\r\n    //   }).catch(error => {\r\n    //     reject(error)\r\n    //   })\r\n    // })\r\n  },\r\n\r\n  // user logout\r\n  logout({ commit, state }) {\r\n    commit('SET_TOKEN', '')\r\n    commit('SET_ROLES', [])\r\n    removeToken\r\n\r\n    // return new Promise((resolve, reject) => {\r\n    //   logout(state.token).then(() => {\r\n    //     removeToken() // must remove  token  first\r\n    //     resetRouter()\r\n    //     commit('RESET_STATE')\r\n    //     resolve()\r\n    //   }).catch(error => {\r\n    //     reject(error)\r\n    //   })\r\n    // })\r\n  },\r\n\r\n  // remove token 前端 登出\r\n  resetToken({ commit }) { // FedLogOut\r\n    // return new Promise(resolve => {\r\n    removeToken() // must remove  token  first\r\n    commit('RESET_STATE')\r\n    resolve()\r\n    // })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n\r\n"]}]}